(function(){"use strict";var t={2981:function(t,e,a){var n=a(5130),o=a(6768);function s(t,e,a,n,s,i){const l=(0,o.g2)("TasksTable");return(0,o.uX)(),(0,o.Wv)(l)}var i=a(4232);const l={class:"container"},r={class:"d-flex justify-content-between pt-5 pb-3 align-items-center border-bottom mb-3"},d=(0,o.Lk)("h3",{class:"m-0"},"Задачи",-1),c={class:"table table-striped"},u=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{scope:"col"},"Номер"),(0,o.Lk)("th",{scope:"col"},"Название"),(0,o.Lk)("th",{scope:"col"},"Описание"),(0,o.Lk)("th",{scope:"col"},"Дата создания"),(0,o.Lk)("th",{scope:"col"})])],-1),m={scope:"row"},k={class:"d-flex flex-nowrap justify-content-end"},p=["onClick"],b=["onClick"],f={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},h={class:"modal-dialog"},g={class:"modal-content"},v={class:"modal-header"},L={class:"modal-title fs-5",id:"exampleModalLabel"},y=(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),T={class:"modal-body"},_={class:"mb-3"},C=(0,o.Lk)("label",{for:"taskName",class:"form-label"},"Название",-1),F={class:"mb-3"},w=(0,o.Lk)("label",{for:"taskDescription",class:"form-label"},"Описание",-1),O={key:0,class:"mb-3"},x=(0,o.Lk)("label",{class:"form-label"},"Метки",-1),j={key:1,class:"mb-3"},E=(0,o.Lk)("label",{for:"taskCompleted",class:"form-label"},"Дата завершения",-1),S={class:"modal-footer"},M=(0,o.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Закрыть ",-1);function V(t,e,a,s,V,P){const X=(0,o.g2)("vue-tags-input");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",l,[(0,o.Lk)("div",r,[d,(0,o.Lk)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>P.initCreate&&P.initCreate(...t))},"Создать")]),(0,o.Lk)("table",c,[u,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(V.tasks,(t=>((0,o.uX)(),(0,o.CE)("tr",{key:t._id},[(0,o.Lk)("th",m,(0,i.v_)(t._id),1),(0,o.Lk)("td",null,(0,i.v_)(t.name),1),(0,o.Lk)("td",null,(0,i.v_)(t.description),1),(0,o.Lk)("td",null,(0,i.v_)(new Date(t.createdAt).toLocaleString()),1),(0,o.Lk)("td",null,[(0,o.Lk)("div",k,[(0,o.Lk)("button",{class:"btn btn-outline-danger",onClick:e=>P.remove(t._id)}," Удалить ",8,p),(0,o.Lk)("button",{class:"btn btn-outline-primary ms-1",onClick:e=>P.initEdit(t)}," Редактировать ",8,b)])])])))),128))])])]),(0,o.Lk)("div",f,[(0,o.Lk)("div",h,[(0,o.Lk)("div",g,[(0,o.Lk)("div",v,[(0,o.Lk)("h1",L,(0,i.v_)(V.editingTask?"Редактирование":"Создание")+" задачи ",1),y]),(0,o.Lk)("div",T,[(0,o.Lk)("div",_,[C,(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>V.taskForm.name=t),class:"form-control",id:"taskName"},null,512),[[n.Jo,V.taskForm.name]])]),(0,o.Lk)("div",F,[w,(0,o.bo)((0,o.Lk)("textarea",{class:"form-control",id:"taskDescription",rows:"3","onUpdate:modelValue":e[2]||(e[2]=t=>V.taskForm.description=t)},null,512),[[n.Jo,V.taskForm.description]])]),V.editingTask?((0,o.uX)(),(0,o.CE)("div",O,[x,(0,o.bF)(X,{modelValue:V.tag,"onUpdate:modelValue":e[3]||(e[3]=t=>V.tag=t),tags:V.taskForm.tags,onTagsChanged:e[4]||(e[4]=t=>V.taskForm.tags=t)},null,8,["modelValue","tags"])])):(0,o.Q3)("",!0),V.editingTask?((0,o.uX)(),(0,o.CE)("div",j,[E,(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=t=>V.taskForm.complete_date=t),class:"form-control",id:"taskCompleted"},null,512),[[n.Jo,V.taskForm.complete_date]])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",S,[M,(0,o.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=t=>V.editingTask?P.edit():P.create())},(0,i.v_)(V.editingTask?"Сохранить":"Создать"),1)])])])])],64)}var P=a(1847),X=a.n(P),D={name:"TasksTable",components:{VueTagsInput:X()},data(){return{taskForm:{name:"",description:"",tags:[],complete_date:null},tasks:[],editingTask:null,modal:null,tag:""}},mounted(){this.getTasks(),this.modal=new window.bootstrap.Modal("#exampleModal",{keyboard:!1})},methods:{getTasks(){fetch("/api/tasks").then((t=>t.json())).then((t=>{this.tasks=t}))},initCreate(){this.editingTask=null,this.taskForm={name:"",description:"",tags:[],complete_date:null},this.modal.show()},create(){fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({name:this.taskForm.name,description:this.taskForm.description})}).then((()=>{this.modal.hide(),this.getTasks()}))},initEdit(t){this.taskForm={...t,complete_date:t.complete_date?new Date(t.complete_date).toISOString().split("T")[0]:null},this.editingTask=t,this.tags=t.tags,this.modal.show()},edit(){fetch("/api/tasks/"+this.editingTask._id,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({name:this.taskForm.name,description:this.taskForm.description,tags:this.taskForm.tags.map((t=>t.text||t)),complete_date:this.taskForm.complete_date})}).then((()=>{this.modal.hide(),this.getTasks()}))},remove(t){fetch("/api/tasks/"+t,{method:"DELETE"}).then((()=>{this.getTasks()}))}}},J=a(1241);const U=(0,J.A)(D,[["render",V]]);var A=U,N={name:"App",components:{TasksTable:A}};const I=(0,J.A)(N,[["render",s]]);var K=I;(0,n.Ef)(K).mount("#app")}},e={};function a(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,n,o,s){if(!n){var i=1/0;for(c=0;c<t.length;c++){n=t[c][0],o=t[c][1],s=t[c][2];for(var l=!0,r=0;r<n.length;r++)(!1&s||i>=s)&&Object.keys(a.O).every((function(t){return a.O[t](n[r])}))?n.splice(r--,1):(l=!1,s<i&&(i=s));if(l){t.splice(c--,1);var d=o();void 0!==d&&(e=d)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[n,o,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,s,i=n[0],l=n[1],r=n[2],d=0;if(i.some((function(e){return 0!==t[e]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(r)var c=r(a)}for(e&&e(n);d<i.length;d++)s=i[d],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(c)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(2981)}));n=a.O(n)})();
//# sourceMappingURL=app.932bb253.js.map